AT_BANNER([[Checking encode and decode of colourbars]])

AT_SETUP([colourbars])

AT_CHECK([make_header -xl 720 -yl 576 -zl 50 -cformat format420 -framerate 25 ../../colourbars_420])

# FIXME: Once the encoder stops reporting "Can't read component picture data"
# FIXME: remove the [ignore] for stdout and stderr.
AT_CHECK([dirac_encoder -SD576 -qf 20 -num_L1 0 ../../colourbars_420 ../../colourbars_420_enc], 0, [ignore], [ignore])

AT_CHECK([dirac_decoder ../../colourbars_420_enc ../../colourbars_420_dec])

AT_CHECK([cmp ../../colourbars_420_enc.yuv ../../colourbars_420_dec.yuv])

AT_CLEANUP
